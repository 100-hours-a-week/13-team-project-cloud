# VPN 을 통한 DB 접근

## VPN
VPN(Virtual Private Network, 가상 사설망)은 공용 네트워크(인터넷)를 마치 전용선으로 연결된 사설 네트워크처럼 사용할 수 있게 해주는 기술
```
핵심원리 

터널링: 데이터를 외부에서 볼 수 없는 '가상 터널'에 담아 전송하는 기술입니다. 원래의 데이터 패킷을 다른 패킷 안에 캡슐화하여 보호합니다.
암호화: 터널을 지나가는 데이터를 암호화하여, 설령 데이터가 중간에 탈취되더라도 내용을 읽을 수 없게 만듭니다. (예: AES-256 등)
인증: 허가된 사용자나 장치만 이 터널에 진입할 수 있도록 신원을 확인합니다.
```

## 1. IPsec VPN

네트워크 계층(L3)에서 암호화하는 전통적인 VPN 프로토콜

**특징**:

- Site-to-Site 연결에 주로 사용 (온프레미스 ↔ AWS VPC)
- IKE(Internet Key Exchange)로 키 교환
- ESP(Encapsulating Security Payload)로 데이터 암호화

**AWS 적용**: AWS Site-to-Site VPN, Transit Gateway VPN

**적합한 상황**: 회사 사무실 네트워크 전체를 AWS VPC와 연결할 때

---

## 2. SSL/TLS VPN (OpenVPN)

애플리케이션 계층에서 SSL/TLS로 암호화하는 VPN

**특징**:

- 클라이언트-서버 방식 (개별 사용자 접속)
- TCP 443 포트 사용 가능 (방화벽 우회 용이)
- 인증서 + 사용자 인증 조합

**AWS 적용**: AWS Client VPN (OpenVPN 기반)

**적합한 상황**: 원격 개발자가 개별적으로 VPC 내부 리소스에 접근할 때

---

## 3. WireGuard

최신 경량 VPN 프로토콜, 커널 레벨에서 동작

**특징**:

- 코드베이스가 작음 (약 4,000줄) → 보안 감사 용이
- UDP 기반, 매우 빠른 성능
- 공개키 암호화 방식 (Curve25519)
- 연결/재연결이 빠름 (모바일 환경에 적합)

**적용 도구**: Tailscale, Netmaker, 직접 구축

**적합한 상황**: 빠른 설정, 고성능이 필요한 소규모 팀 환경


---
## 종류별 VPN 요약

| 기술 | 주요 사용처 | 주요 특징 |
| --- | --- | --- |
| IPsec | Site-to-Site, 기업 환경 | 하드웨어 가속(AES-NI 등)을 지원하여 대역폭이 안정적이고, AWS Site-to-Site VPN처럼 클라우드 사업자가 직접 관리해주는 서비스가 많아 신뢰도가 높음 |
| SSL/TLS (OpenVPN) | 원격 접속, Client VPN | 최신 암호화 알고리즘(ChaCha20)을 사용하여 IPsec이나 OpenVPN보다 오버헤드가 훨씬 적고 전송 속도가 빠름 |
| WireGuard | 개인/소규모 팀, 모던 환경 | 개별 사용자의 접속 제어와 인증(MFA 등)이 간편하며, 포트 443(HTTPS)을 이용해 어디서나 방화벽 제약 없이 접속 |

<br>

## WireGuard vs WireGuard 기반 도구 비교

| 항목 | WireGuard 직접 설치 | Tailscale | Netmaker | Firezone |
| --- | --- | --- | --- | --- |
| **설정 난이도** | 수동 (키 생성, conf 파일 작성) | 자동 (로그인만) | 중간 (서버 구축 필요) | 중간 (서버 구축 필요) |
| **관리 UI** | 없음 (CLI만) | 웹 대시보드 | 웹 대시보드 | 웹 대시보드 |
| **키 관리** | 수동 교환 | 자동 | 자동 | 자동 |
| **NAT 통과** | 수동 설정 | 자동 (DERP 릴레이) | 자동 | 자동 |
| **피어 추가** | conf 파일 수정 후 재시작 | 클릭 한 번 | 웹 UI에서 추가 | 웹 UI에서 추가 |
| **외부 의존성** | 없음 | Tailscale 서버 | 셀프호스팅 | 셀프호스팅 |
| **비용** | 무료 | 무료/유료 | 무료 (오픈소스) | 무료 (오픈소스) |
| **호스팅** | 직접 | SaaS | 셀프호스팅 | 셀프호스팅 |

의존성이 필요없고 비용이 들지않는 WireGuard를 VPN으로 선택했습니다.